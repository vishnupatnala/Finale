import requests
from plyer import notification

def show_weather(city):
    # Get coordinates
    geo_url = "https://geocoding-api.open-meteo.com/v1/search"
    geo_params = {"name": city, "count": 1}
    geo_res = requests.get(geo_url, params=geo_params).json()
    if not geo_res.get("results"):
        print("City not found.")
        return

    lat = geo_res["results"][0]["latitude"]
    lon = geo_res["results"][0]["longitude"]

    # Get weather
    weather_url = "https://api.open-meteo.com/v1/forecast"
    weather_params = {"latitude": lat, "longitude": lon, "current_weather": True}
    weather_res = requests.get(weather_url, params=weather_params).json()
    cw = weather_res.get("current_weather")
    if not cw:
        print("Weather data not available.")
        return

    message = f"{city}: {cw['temperature']}Â°C, Wind {cw['windspeed']} km/h"

    print("Weather:", message)
    notification.notify(
        title="Weather Update",
        message=message,
        timeout=5
    )

if __name__ == "__main__":
    city = input("Enter city name: ")
    show_weather(city)

